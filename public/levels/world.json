{
  "startBoard": "clearing",
  "boards": {
    "clearing": {
      "file": "levels/world_clearing.json",
      "name": "The Clearing",
      "gridPosition": { "x": 0, "y": 0 }
    },
    "cave": {
      "file": "levels/world_cave.json",
      "name": "Crystal Cave",
      "gridPosition": { "x": 1, "y": 0 }
    },
    "tower": {
      "file": "levels/world_tower.json",
      "name": "The Tower",
      "gridPosition": { "x": 1, "y": 1 }
    },
    "village": {
      "file": "levels/world_village.json",
      "name": "Oakvale Village",
      "gridPosition": { "x": 0, "y": 1 }
    }
  },
  "transitions": [
    {
      "from": { "board": "clearing", "x": 5, "y": 5, "type": "exit" },
      "to":   { "board": "cave", "x": 2, "y": 1 }
    },
    {
      "from": { "board": "clearing", "x": 12, "y": 5, "type": "door" },
      "to":   { "board": "tower", "x": 14, "y": 7 }
    },
    {
      "from": { "board": "cave", "x": 1, "y": 1, "type": "door" },
      "to":   { "board": "clearing", "x": 1, "y": 1 }
    },
    {
      "from": { "board": "cave", "x": 5, "y": 5, "type": "exit" },
      "to":   { "board": "tower", "x": 6, "y": 8 }
    },
    {
      "from": { "board": "tower", "x": 14, "y": 8, "type": "door" },
      "to":   { "board": "cave", "x": 18, "y": 1 }
    },
    {
      "from": { "board": "clearing", "x": 1, "y": 5, "type": "door" },
      "to":   { "board": "village", "x": 10, "y": 7 }
    },
    {
      "from": { "board": "village", "x": 10, "y": 7, "type": "door" },
      "to":   { "board": "clearing", "x": 1, "y": 5 }
    },
    {
      "from": { "board": "clearing", "x": 10, "y": 3, "type": "door" },
      "to":   { "board": "cave", "x": 18, "y": 3 }
    },
    {
      "from": { "board": "cave", "x": 17, "y": 3, "type": "door" },
      "to":   { "board": "clearing", "x": 9, "y": 3 }
    }
  ],
  "quests": [
    {
      "id": "elders_request",
      "name": "The Elder's Request",
      "description": "Help the Village Elder find a rare crystal from the cave.",
      "autoStart": true,
      "stages": [
        {
          "description": "Talk to the Village Elder in Oakvale Village",
          "objectives": [{ "type": "interact", "entityId": "elder" }],
          "onComplete": [
            { "type": "setFlag", "flag": "quest_elders_request_active", "value": true },
            { "type": "showMessage", "speaker": "System", "text": "New Quest: The Elder's Request" }
          ]
        },
        {
          "description": "Find the rare crystal in Crystal Cave",
          "objectives": [{ "type": "pickup", "itemId": "rare_crystal" }],
          "onComplete": [
            { "type": "setFlag", "flag": "has_rare_crystal", "value": true },
            { "type": "showMessage", "speaker": "System", "text": "Quest Updated: Return the crystal to the Elder" }
          ]
        },
        {
          "description": "Return the rare crystal to the Village Elder",
          "objectives": [
            {
              "type": "interact",
              "entityId": "elder",
              "requiredFlags": [{ "flag": "has_rare_crystal", "value": true }]
            }
          ],
          "onComplete": [
            { "type": "removeItem", "itemId": "rare_crystal" },
            { "type": "giveItem", "itemId": "elder_amulet" },
            { "type": "setFlag", "flag": "quest_elders_request_complete", "value": true },
            { "type": "setFlag", "flag": "cave_passage_unlocked", "value": true },
            { "type": "showMessage", "speaker": "Village Elder", "text": "Thank you! Take this amulet as a reward." }
          ]
        }
      ]
    }
  ]
}
